import pylab as pl
import math
import numpy as np
import sys
import os
from matplotlib import pyplot as plt
import subprocess
import matplotlib.ticker as mticker
from matplotlib.ticker import ScalarFormatter

plt.figure(figsize=(8,3))
plt.ylabel("CDF", fontsize=17)
plt.xlabel("Measured Buffer Occupancy (MB)", fontsize=17)
#plt.ylim([0.8,1.003])
plt.xlim([0,20])

CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size = [2,3,4,5,6,6,7,7,8,8,9,9,9,10,10,11,11,12,12,13,14,14,15,16,16,17,18,18,19,20,20,21,22,22,23,23,24,25,25,26,27,27,28,29,30,31,32,34,36,43,39780,60180,75480,87720,98940,108120,117300,126480,135660,143820,153000,161160,170340,178500,187680,196860,207060,217780,229500,241740,256020,273360,294780,325380,378420,555900,682380,754800,804780,844560,882300,915960,944520,973080,999600,1026120,1050600,1076100,1100580,1126080,1151580,1178100,1205640,1237260,1268880,1306620,1350480,1407600,1491240,1980840]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '-', color='blue', label='BFC')

Buffer_Size = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,616,1442,2444,2972,3886,4888,5978,7068,8158,9248,10426,11692,13046,14400,15828,17230,18672,20202,21732,23384,25002,26742,28414,30208,32016,33844,35789,37730,39734,41826,43938,46152,48488,50776,53200,55698,58264,60944,63768,66672,69780,72996,76326,79962,83672,87782,91986,96610,101450,106650,112350,118640,125938,133738,142756,153253,165320,179558,196757,218470,245608,280295,320640,367118,417712,471238,526767,586483,651293,724680,805778,900123,1014268,1187002,1615420,2522546,3526818,4665427,5553118,6393062,7256764,8085030,8834970,14620716]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '-.', color='green', label='HPCC')

Buffer_Size = [0,1020,2040,4080,8160,12240,17340,22440,27540,32640,37740,42840,47940,53040,58140,62220,67320,72420,76500,81600,86700,91800,96900,102000,107100,112200,117300,122563,128520,133620,139319,144840,150565,156060,162180,168300,174420,181130,187680,194318,201072,208080,215486,223321,230068,238680,246840,255000,263536,273360,283111,293760,305987,317673,330480,343674,358020,374011,392208,411772,433853,456803,485549,519748,557251,603840,660474,728850,804869,890808,977861,1065900,1158848,1250221,1354560,1476848,1603440,1741692,1889440,2019640,2153220,2300100,2457180,2600823,2736660,2910660,3074959,3271140,3516224,3807067,4173696,4614780,5198939,5908568,6691741,7479173,8231448,8951475,9794212,17982158]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '--', color='red', label='DCQCN')


ax = plt.axes()
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.1, 1.02, 0.8, 1.02), loc=3, ncol=3, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()

plt.figure(figsize=(8,3))
plt.ylabel("FCT Slow Down", fontsize=17)
plt.xlabel("Flow Size (KB)", fontsize=17)
plt.xscale('log')
plt.yscale('log')
plt.gca().set_ylim(bottom=1)

Flow_Size = [3,12,48,192,768,3072,12288]
SlowDown = [1.1014285714285714, 2.9101635514018693, 5.1653846153846157, 7.0822368421052628, 10.417788461538462, 10.574498784933171, 9.4679254007398281]
plt.plot(Flow_Size, SlowDown, '-', color='blue', label='BFC')

SlowDown = [71.122976190476194, 69.511331775700938, 51.434447674418607, 40.123464912280703, 37.644637096774197, 43.289230959446094, 37.558647692825865]
plt.plot(Flow_Size, SlowDown,  '-.', color='green', label='HPCC')

SlowDown = [84.311817878454775, 83.493750000000006, 58.51672794117647, 48.563155021834064, 27.561369346733667, 31.396985446985447, 36.465393197907048]
plt.plot(Flow_Size, SlowDown, '--', color='red', label='DCQCN')
ax = plt.axes()
ax.get_yaxis().set_ticks([1,2,4,8,16,32,64,128], minor=True)
ax.get_yaxis().set_ticks([], minor=False)
ax.yaxis.set_minor_formatter(mticker.ScalarFormatter())
ax.yaxis.get_minor_formatter().set_scientific(False)
ax.yaxis.set_major_formatter(mticker.ScalarFormatter())
ax.yaxis.get_major_formatter().set_scientific(False)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_minor_ticks():
	tick.label.set_fontsize(14)
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.1, 1.02, 0.8, 1.02), loc=3, ncol=3, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()

plt.figure(figsize=(8,3))
plt.ylabel("CDF", fontsize=17)
plt.xlabel("Measured Buffer Occupancy (MB)", fontsize=17)
#plt.ylim([0.8,1.003])
plt.xlim([0,2])

CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size = [2,3,4,5,5,6,7,7,7,8,8,9,9,10,10,10,11,11,12,12,12,13,13,14,14,15,15,16,16,16,17,17,18,19,19,20,20,21,21,22,23,23,24,25,26,27,28,30,32,40,32640,48960,61200,70380,79560,86700,93840,99960,106080,113220,119340,125460,131580,138720,145860,151980,159120,166260,174420,183600,191760,202980,213180,226440,240720,257040,275400,294780,313140,331500,347820,364140,378420,393720,408000,421260,435540,448800,463080,477360,491640,506940,523260,540600,561000,583440,610980,647700,703800,1165860]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '-', color='blue', label='BFC')

Buffer_Size = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,352,1320,1442,2146,2708,3534,3974,4800,5680,6296,7156,8036,8950,9742,10690,11678,12606,13608,14664,15666,16702,17758,18848,20016,21122,22294,23418,24562,25780,27006,28306,29572,30926,32266,33600,34988,36430,37852,39348,40858,42340,43944,45536,47188,48880,50634,52374,54140,55996,57970,59936,61940,64032,66212,68436,70748,73226,75724,78324,81052,83828,86806,89955,93286,96962,100774,104768,109050,113732,118850,124571,130980,138084,145998,155672,167375,181738,202502,236948,615422]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '-.', color='green', label='HPCC')

Buffer_Size = [0,0,1020,2040,4080,6120,9180,13260,17340,20400,24480,27540,31620,34680,38760,41820,45900,48960,52020,56100,59160,62220,66300,69360,72420,75644,79045,82620,85680,88740,92028,95880,98940,102000,105810,109140,112918,116280,120360,123420,127500,130939,134640,138720,142207,145860,149639,153000,157080,160797,164554,168636,172380,176460,180540,184620,189233,193291,197880,202359,207060,211188,216240,220893,225420,230520,235620,240720,245941,251940,257040,263160,269189,274891,281149,287640,294780,301920,309060,317079,325207,333540,342703,351343,361259,371280,382500,394296,406338,419634,434520,450525,467606,488696,512044,542066,579329,632400,722078,1469464]
Buffer_Size = np.array(Buffer_Size)
plt.plot(Buffer_Size/1e6, CDF, '--', color='red', label='DCQCN')


ax = plt.axes()
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.1, 1.02, 0.8, 1.02), loc=3, ncol=3, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()

plt.figure(figsize=(8,3))
plt.ylabel("FCT Slow Down", fontsize=17)
plt.xlabel("Flow Size (KB)", fontsize=17)
plt.xscale('log')
plt.yscale('log')
plt.gca().set_ylim(bottom=1)

SlowDown = [1.1022619047619047, 2.9154205607476635, 5.1287751677852347, 7.357133507853403, 9.5637129380053914, 10.705308406113538, 9.3409431137724557]
plt.plot(Flow_Size, SlowDown, '-', color='blue', label='BFC')

SlowDown = [3.1703005885373465, 3.124318181818182, 3.5161458333333333, 4.2227027027027031, 16.779683734939759, 37.832828185328182, 36.527861183637945]
plt.plot(Flow_Size, SlowDown,  '-.', color='green', label='HPCC')

SlowDown = [4.5514172224401728, 4.5377232142857142, 4.295774647887324, 4.3147972972972974, 5.1028819444444444, 16.432530864197531, 29.433623388005508]
plt.plot(Flow_Size, SlowDown, '--', color='red', label='DCQCN')
ax = plt.axes()
ax.get_yaxis().set_ticks([1,2,4,8,16,32,64], minor=True)
ax.get_yaxis().set_ticks([], minor=False)
ax.yaxis.set_minor_formatter(mticker.ScalarFormatter())
ax.yaxis.get_minor_formatter().set_scientific(False)
ax.yaxis.set_major_formatter(mticker.ScalarFormatter())
ax.yaxis.get_major_formatter().set_scientific(False)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_minor_ticks():
	tick.label.set_fontsize(14)
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.1, 1.02, 0.8, 1.02), loc=3, ncol=3, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()

plt.show()