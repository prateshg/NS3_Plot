import pylab as pl
import math
import numpy as np
import sys
import os
from matplotlib import pyplot as plt
import subprocess
import matplotlib.ticker as mticker
from matplotlib.ticker import ScalarFormatter

#INCAST

fig, (ax1,ax2)=plt.subplots(1,2,sharey=True,figsize=(8,3))#,gridspec_kw={'hspace':0.1,'wspace':0.1})
ax1.set_ylabel("CDF", fontsize=17)
fig.text(0.5,0.05, "Measured Buffer Occupancy (MB)", ha="center",fontsize=17)
fig.text(0.3,0.4, "HPCC", ha="center",fontsize=17)
fig.text(0.8,0.4, "DCQCN", ha="center",fontsize=17)
#ax1.set_ylim([0.8,1.003])
ax1.set_xlim([0,20])
ax2.set_xlim([0,20])
Buffer_Size1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,264,352,440,616,1354,1442,1706,2444,2884,3886,5714,11516,35516,45414,48508,50478,52096,53538,54912,56368,57898,59604,61608,64234,68857,89150,135078,146208,156912,220624,574091,1590018]
CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size1 = np.array(Buffer_Size1)
ax1.plot(Buffer_Size1/(1e6), CDF, '-.', color='green', label='10 Gbps')

Buffer_Size2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,264,352,440,704,1354,1354,1618,1882,2444,2620,2884,3534,3798,4150,4624,5030,5592,5978,6506,7068,7508,8158,8686,9336,9952,10602,11340,11956,12782,13608,14332,15192,16106,17108,18110,19200,20324,21522,22822,24264,25828,27480,29362,31454,33830,36552,39754,43620,48332,54364,62800,75990,99582,138314,188908,247592,321258,424627,777502,1560155,2390263,3206590,4201262]
Buffer_Size2 = np.array(Buffer_Size2)
ax1.plot(Buffer_Size2/(1e6), CDF, '-', color='blue', label='40 Gbps')

Buffer_Size3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,616,1442,2444,2972,3886,4888,5978,7068,8158,9248,10426,11692,13046,14400,15828,17230,18672,20202,21732,23384,25002,26742,28414,30208,32016,33844,35789,37730,39734,41826,43938,46152,48488,50776,53200,55698,58264,60944,63768,66672,69780,72996,76326,79962,83672,87782,91986,96610,101450,106650,112350,118640,125938,133738,142756,153253,165320,179558,196757,218470,245608,280295,320640,367118,417712,471238,526767,586483,651293,724680,805778,900123,1014268,1187002,1615420,2522546,3526818,4665427,5553118,6393062,7256764,8085030,8834970,14620716]
Buffer_Size3 = np.array(Buffer_Size3)
ax1.plot(Buffer_Size3/(1e6), CDF, '--', color='red', label='100 Gbps')
for tick in ax1.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax1.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)

handles, labels = ax1.get_legend_handles_labels()
plt.figlegend(handles, labels, loc='upper center', ncol=3, labelspacing=0.0, fontsize=16, frameon=False)

Buffer_Size4 = [0,0,0,1020,1020,1020,2040,2040,2040,3060,3060,3060,4080,4080,5100,5100,5100,6120,6120,7140,7140,7140,8160,8160,8160,9180,9180,10200,10200,10200,11220,11220,11220,12240,12240,12240,13260,13260,13663,14280,14280,15300,15300,16320,16320,17340,17340,17830,18360,19056,19380,20400,20400,21420,21420,22440,23460,23460,24480,25500,26520,26520,27540,28560,29580,30600,32640,33660,34680,36720,38760,40800,43860,46920,51000,55080,60180,66300,71400,77520,81600,85680,88740,91800,94860,97442,99960,103020,106424,110160,114623,120360,128520,142800,168865,199920,237981,291720,394462,1199520]
CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size4 = np.array(Buffer_Size4)
ax2.plot(Buffer_Size4/(1e6), CDF, '-.', color='green', label='10 Gbps')

Buffer_Size5 = [0,0,1020,1020,2040,3060,4080,5100,6120,7140,9180,10200,12240,14280,15300,17340,18360,20400,21420,23460,24480,26520,27540,29580,30600,32640,33660,35700,36720,38760,39780,41820,42840,44880,45900,47940,49980,51000,53040,54060,56100,58140,59160,61200,63240,65280,67320,69203,70880,72743,74772,76859,78896,81600,83640,85680,87720,90780,92820,95880,97920,100980,103470,106080,109140,112652,116280,119340,123420,127331,131580,135660,140760,145860,150960,157080,164220,171360,180038,189720,201960,216523,235620,259412,293793,346652,415140,491992,583440,694620,823744,939420,1049191,1150140,1260720,1404891,1758127,2549334,3294858,4754872]
Buffer_Size5 = np.array(Buffer_Size5)
ax2.plot(Buffer_Size5/(1e6), CDF, '-', color='blue', label='40 Gbps')

Buffer_Size6 = [0,1020,2040,4080,8160,12240,17340,22440,27540,32640,37740,42840,47940,53040,58140,62220,67320,72420,76500,81600,86700,91800,96900,102000,107100,112200,117300,122563,128520,133620,139319,144840,150565,156060,162180,168300,174420,181130,187680,194318,201072,208080,215486,223321,230068,238680,246840,255000,263536,273360,283111,293760,305987,317673,330480,343674,358020,374011,392208,411772,433853,456803,485549,519748,557251,603840,660474,728850,804869,890808,977861,1065900,1158848,1250221,1354560,1476848,1603440,1741692,1889440,2019640,2153220,2300100,2457180,2600823,2736660,2910660,3074959,3271140,3516224,3807067,4173696,4614780,5198939,5908568,6691741,7479173,8231448,8951475,9794212,17982158]
Buffer_Size6 = np.array(Buffer_Size6)
ax2.plot(Buffer_Size6/(1e6), CDF, '--', color='red', label='100 Gbps')

fig.tight_layout(rect=[0.0,0.1,1,0.9])


fig, (ax1,ax2)=plt.subplots(1,2,sharey=True,figsize=(8,3))#,gridspec_kw={'hspace':0.1,'wspace':0.1})
ax1.set_ylabel("CDF", fontsize=17)
fig.text(0.5,0.05, "Measured Buffer Occupancy (us)", ha="center",fontsize=17)
fig.text(0.3,0.4, "HPCC", ha="center",fontsize=17)
fig.text(0.8,0.4, "DCQCN", ha="center",fontsize=17)
#ax1.set_ylim([0.8,1.003])
ax1.set_xlim([0,60])
ax2.set_xlim([0,60])
ax1.plot((Buffer_Size1)/(3.0*10.0*1e3), CDF, '-.', color='green', label='10 Gbps')
ax1.plot((Buffer_Size2)/(3.0*40.0*1e3), CDF, '-', color='blue', label='40 Gbps')
ax1.plot((Buffer_Size3)/(3.0*100.0*1e3), CDF, '--', color='red', label='100 Gbps')
for tick in ax1.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax1.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)

handles, labels = ax1.get_legend_handles_labels()
plt.figlegend(handles, labels, loc='upper center', ncol=3, labelspacing=0.0, fontsize=16, frameon=False)

ax2.plot((Buffer_Size4)/(3.0*10.0*1e3), CDF, '-.', color='green', label='10 Gbps')
ax2.plot((Buffer_Size5)/(3.0*40.0*1e3), CDF, '-', color='blue', label='40 Gbps')
ax2.plot((Buffer_Size6)/(3.0*100.0*1e3), CDF, '--', color='red', label='100 Gbps')
fig.tight_layout(rect=[0.0,0.1,1,0.9])


#Noincast
fig, (ax1,ax2)=plt.subplots(1,2,sharey=True,figsize=(8,3))#,gridspec_kw={'hspace':0.1,'wspace':0.1})
ax1.set_ylabel("CDF", fontsize=17)
fig.text(0.5,0.05, "Measured Buffer Occupancy (MB)", ha="center",fontsize=17)
fig.text(0.3,0.4, "HPCC", ha="center",fontsize=17)
fig.text(0.8,0.4, "DCQCN", ha="center",fontsize=17)
#ax1.set_ylim([0.8,1.003])
ax1.set_xlim([0,2])
ax2.set_xlim([0,2])
Buffer_Size1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,264,264,352,440,792,1354,1442,1618,2444,2708,3534,4204,6066,41352]
CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size1 = np.array(Buffer_Size1)
ax1.plot(Buffer_Size1/(1e6), CDF, '-.', color='green', label='10 Gbps')

Buffer_Size2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,264,264,352,440,792,1354,1354,1618,1794,2444,2532,2796,3324,3622,3886,4380,4766,5064,5714,5978,6418,7034,7386,7948,8422,8984,9512,10074,10656,11306,11868,12606,13242,13960,14752,15490,16316,17196,18110,19078,20114,21204,22328,23648,25002,26498,28150,30012,32070,34426,37168,40412,44358,49391,56578,68514,189842]
Buffer_Size2 = np.array(Buffer_Size2)
ax1.plot(Buffer_Size2/(1e6), CDF, '-', color='blue', label='40 Gbps')

Buffer_Size3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,352,1320,1442,2146,2708,3534,3974,4800,5680,6296,7156,8036,8950,9742,10690,11678,12606,13608,14664,15666,16702,17758,18848,20016,21122,22294,23418,24562,25780,27006,28306,29572,30926,32266,33600,34988,36430,37852,39348,40858,42340,43944,45536,47188,48880,50634,52374,54140,55996,57970,59936,61940,64032,66212,68436,70748,73226,75724,78324,81052,83828,86806,89955,93286,96962,100774,104768,109050,113732,118850,124571,130980,138084,145998,155672,167375,181738,202502,236948,615422]
Buffer_Size3 = np.array(Buffer_Size3)
ax1.plot(Buffer_Size3/(1e6), CDF, '--', color='red', label='100 Gbps')
for tick in ax1.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax1.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)

handles, labels = ax1.get_legend_handles_labels()
plt.figlegend(handles, labels, loc='upper center', ncol=3, labelspacing=0.0, fontsize=16, frameon=False)

Buffer_Size4 = [0,0,0,1020,1020,1020,1020,2040,2040,2040,2040,3060,3060,3060,4080,4080,4080,4492,5100,5100,5100,6120,6120,6120,7140,7140,7140,7140,8160,8160,8160,8834,9180,9180,9180,10200,10200,10200,10200,11220,11220,11220,11220,12240,12240,12240,12240,13260,13260,13260,13797,14280,14280,14280,15300,15300,15300,16320,16320,16320,17340,17340,17340,18360,18360,18360,19380,19380,20240,20400,20400,21420,21420,22440,22440,23025,23460,23923,24480,25500,25500,26520,26520,27540,28560,28560,29580,30600,31620,32640,33660,34680,35700,37740,38760,41352,43860,47940,54060,111180]
CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Buffer_Size4 = np.array(Buffer_Size4)
ax2.plot(Buffer_Size4/(1e6), CDF, '-.', color='green', label='10 Gbps')

Buffer_Size5 = [0,0,0,1020,1020,2040,2040,3060,4080,5100,6120,7140,8160,9180,10200,11220,13260,14280,15300,16320,17340,18924,20400,21420,22440,23460,24480,25500,27540,28560,29580,30600,31620,32640,33660,34680,36228,37740,38760,39780,40800,41820,42840,44472,45900,46920,47940,49980,51000,52020,53579,55080,56100,58140,59160,60564,62220,63240,65280,66631,68340,69622,71400,73440,74460,76500,78540,79899,81600,83640,85680,87720,89760,91800,93840,95880,98940,100980,103641,106080,109140,112200,115260,118320,121380,125460,129097,133200,137700,142800,147900,153526,160140,167280,175769,185640,198900,216834,245820,549010]
Buffer_Size5 = np.array(Buffer_Size5)
ax2.plot(Buffer_Size5/(1e6), CDF, '-', color='blue', label='40 Gbps')

Buffer_Size6 = [0,0,1020,2040,4080,6120,9180,13260,17340,20400,24480,27540,31620,34680,38760,41820,45900,48960,52020,56100,59160,62220,66300,69360,72420,75644,79045,82620,85680,88740,92028,95880,98940,102000,105810,109140,112918,116280,120360,123420,127500,130939,134640,138720,142207,145860,149639,153000,157080,160797,164554,168636,172380,176460,180540,184620,189233,193291,197880,202359,207060,211188,216240,220893,225420,230520,235620,240720,245941,251940,257040,263160,269189,274891,281149,287640,294780,301920,309060,317079,325207,333540,342703,351343,361259,371280,382500,394296,406338,419634,434520,450525,467606,488696,512044,542066,579329,632400,722078,1469464]
Buffer_Size6 = np.array(Buffer_Size6)
ax2.plot(Buffer_Size6/(1e6), CDF, '--', color='red', label='100 Gbps')

fig.tight_layout(rect=[0.0,0.1,1,0.9])


fig, (ax1,ax2)=plt.subplots(1,2,sharey=True,figsize=(8,3))#,gridspec_kw={'hspace':0.1,'wspace':0.1})
ax1.set_ylabel("CDF", fontsize=17)
fig.text(0.5,0.05, "Measured Buffer Occupancy (us)", ha="center",fontsize=17)
fig.text(0.3,0.4, "HPCC", ha="center",fontsize=17)
fig.text(0.8,0.4, "DCQCN", ha="center",fontsize=17)
#ax1.set_ylim([0.8,1.003])
ax1.set_xlim([0,5])
ax2.set_xlim([0,5])
ax1.plot((Buffer_Size1)/(3.0*10.0*1e3), CDF, '-.', color='green', label='10 Gbps')
ax1.plot((Buffer_Size2)/(3.0*40.0*1e3), CDF, '-', color='blue', label='40 Gbps')
ax1.plot((Buffer_Size3)/(3.0*100.0*1e3), CDF, '--', color='red', label='100 Gbps')
for tick in ax1.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax1.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax2.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)

handles, labels = ax1.get_legend_handles_labels()
plt.figlegend(handles, labels, loc='upper center', ncol=3, labelspacing=0.0, fontsize=16, frameon=False)

ax2.plot((Buffer_Size4)/(3.0*10.0*1e3), CDF, '-.', color='green', label='10 Gbps')
ax2.plot((Buffer_Size5)/(3.0*40.0*1e3), CDF, '-', color='blue', label='40 Gbps')
ax2.plot((Buffer_Size6)/(3.0*100.0*1e3), CDF, '--', color='red', label='100 Gbps')
fig.tight_layout(rect=[0.0,0.1,1,0.9])


plt.show()