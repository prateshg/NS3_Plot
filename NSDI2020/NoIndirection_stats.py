import pylab as pl
import math
import numpy as np
import sys
import os
from matplotlib import pyplot as plt
import subprocess

plt.figure(figsize=(8,4))
plt.ylabel("FCT Slow Down", fontsize=17)
plt.xlabel("Flow Size (KB)", fontsize=17)
plt.xscale('log')
plt.yscale('log')

Flow_Size = [1, 2, 4, 8, 16, 64, 256, 1024, 2048]
SlowDown =  [1.0573281026552777, 10.42122641509434, 11.233844339622642, 11.912844036697248, 16.724673913043478, 37.022718253968257, 56.7419776119403, 41.785272828507793, 17.74737302977233]
plt.plot(Flow_Size, SlowDown, '-', color='blue', label='BFC (Incast)')

Flow_Size = [1, 2, 4, 8, 16, 64, 256, 1024, 2048]
SlowDown = [1.0765258356240788, 135.595, 152.40082547169811, 170.74305555555554, 189.21583333333334, 201.42305389221556, 182.12931034482759, 99.945184630738524, 40.281642927308447]
plt.plot(Flow_Size, SlowDown, '--', color='red', label='BFC-Indirection (Incast)')

Flow_Size = [1, 2, 4, 8, 16, 64, 256, 1024, 2048]
SlowDown = [1.0568974103585658, 1.1245283018867924, 1.2331018518518519, 1.4519144144144145, 1.8639957264957265, 2.9702205882352941, 5.0246861924686188, 6.3901687598116172, 6.6930103148751359,]
plt.plot(Flow_Size, SlowDown, linestyle=':', color='blue', label='BFC')

Flow_Size = [1, 2, 4, 8, 16, 64, 256, 1024, 2048]
SlowDown = [1.0572671871265833, 2.1707142857142858, 2.2434090909090911, 2.4370412844036697, 2.7841814159292033, 3.6823643410852713, 5.812648367952522, 6.8725961538461542, 6.6774660291897332]
plt.plot(Flow_Size, SlowDown, '-.', color='red', label='BFC-Indirection')


ax = plt.axes()
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.01, 0.97, 0.99, 0.97), loc=3, ncol=2, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()


plt.figure(figsize=(8,4))
plt.ylabel("CDF", fontsize=17)
plt.xlabel("Fraction of Collisions", fontsize=17)
#plt.xscale('log')
#plt.yscale('pl
#plt.xlim([0,200])
CDF = [0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99, 1.0]
Collisions =[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.333333,0.818182]

plt.plot(Collisions, CDF, '-', color='blue', label='BFC (Incast)')
Collisions =[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2,0.333333,0.484848,0.518519,0.571429,0.603774,0.631579,0.652174,0.666667,0.6875,0.7,0.714286,0.727273,0.736842,0.75,0.758621,0.769231,0.78,0.790698,0.8,0.814815,0.829268,0.85,0.956522]

plt.plot(Collisions, CDF, '--', color='red', label='BFC-Indirection (Incast)')

Collisions =[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
plt.plot(Collisions, CDF, linestyle=':', color='blue', label='BFC')

Collisions =[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.25,0.333333,0.8]
plt.plot(Collisions, CDF,'-.', color='red', label='BFC-Indirection')


ax = plt.axes()
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.01, 0.97, 0.99, 0.97), loc=3, ncol=2, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()


plt.figure(figsize=(8,4))
plt.xlabel("Active Flows", fontsize=17)
plt.ylabel("PhysicalQ Collisions", fontsize=17)
#plt.xscale('log')
#plt.yscale('log')

VQ=[]
Collisions = []
for i in range(140):
	VQ.append(i)
	if i>30:
		Collisions.append(i-30)
	else:
		Collisions.append(0)
plt.plot(VQ,Collisions, '--', color='black', label='Ideal')

VQ = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,118,119,121,122,123,125,126,129,130,131,132,134,135,136,138,141,142,145,147,148,149,150,152,153,154,155,156,158,159,160,162,163,164,165]
Collisions =  [0,0,0,0,0.000196264,0.000616454,0.00086729,0.000902224,0.00201843,0.00443844,0.00649635,0.00928334,0.0159022,0.0276907,0.0247383,0.032593,0.0620311,0.0996885,0.0958235,0.133329,0.147197,0.333236,0.514729,0.639303,0.889342,0.883708,1.31331,1.90461,2.61372,3.00038,4.24273,4.50958,5.27014,5.8966,6.49662,7.58319,9.05537,9.76838,10.9437,11.7821,12.3097,13.1744,14.0824,14.9147,15.5708,16.7487,17.6152,18.4829,19.2869,20.3647,20.9902,21.8987,22.9286,23.8915,24.8348,25.734,26.5899,27.6701,28.6324,29.5903,30.559,31.4306,32.3747,33.517,34.4566,35.2923,36.2812,37.271,38.2544,39.2023,40.1681,41.1903,42.1843,43.1533,44.1901,45.1488,46.1511,47.155,48.1464,49.1098,50.1101,51.1049,52.104,53.1278,54.1325,55.1496,56.1798,57.1475,58.1686,59.1553,60.1286,61.1593,62.1349,63.2121,64.17,65.0897,66.1237,67.122,68.141,69.1279,70.1024,71.0468,72.0283,73.0621,74.02,75.0115,76.0294,77,78,79,80,81,82.3333,83,84,85,88,89,91,92,93,95,97,100,100,101,102,104,106,106,109,111,112,115,117.333,118,120,120,122,123,124,125,126,128,129,130,132,133,134,135]
plt.plot(VQ, Collisions, '-', color='blue', label='BFC (Incast)')

VQ = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,135,136,137,140,141,143]
Collisions =  [-0.00858079,0.456836,0.571769,1.08794,1.0958,1.65839,2.38086,3.18151,4.00782,4.83656,5.65834,6.43564,7.14444,7.9926,8.85187,9.69829,10.3758,11.2921,12.159,12.9897,13.8721,14.5548,15.4266,16.2062,16.9732,17.8721,18.6662,19.5477,20.3176,21.1081,21.9892,22.7389,23.6136,24.4964,25.2303,26.1248,26.9447,27.7109,28.5794,29.4533,30.2868,31.1383,31.9711,32.7734,33.5955,34.5023,35.3271,36.1166,36.998,37.8262,38.6332,39.4347,40.3471,41.0081,41.9504,42.5726,43.1195,43.613,44.0833,44.6025,45.361,46.0749,46.331,46.8032,47.0573,47.734,48.1182,48.6759,49.0329,49.4474,50.5273,51.0969,51.635,52.4349,53.0772,54.1823,54.9648,56.3463,57.5534,58.7456,59.9287,61.2372,62.9772,64.4784,65.6169,66.085,67.5863,69.0437,69.3284,72.1077,73.1241,74.4221,75.7549,77.2727,78.7817,79.0629,80.6154,82.1034,83.3655,83.016,85.1603,87.4588,88.4474,88.6726,89.7297,89.2571,91.3608,93.0377,92.5747,92.5,94.2754,95.8592,97.0288,97.7867,99.1765,101.195,101.7,102.242,103.423,103.292,103.854,104.917,106.804,107.688,108.778,110.105,109.917,111.769,112.111,108.833,114,113.7,115.2,113.857,105,106,107.5,110,112,113]
plt.plot(VQ, Collisions, '--', color='red', label='BFC-Indirection (Incast)')

VQ = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]
Collisions =  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
plt.plot(VQ, Collisions, linestyle=':', color='blue', label='BFC')

VQ = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]
Collisions =  [-0.000220178,0.00831448,0.142289,0.259495,0.42729,0.62466,0.881258,1.17654,1.45511,1.78702,2.07309,2.41688,2.77955,3.21287,3.88785,4.76316,5.41667,5]
plt.plot(VQ, Collisions, '-.', color='red', label='BFC-Indirection')


ax = plt.axes()
for tick in ax.xaxis.get_major_ticks():
	tick.label.set_fontsize(14)
for tick in ax.yaxis.get_major_ticks():
	tick.label.set_fontsize(14)
plt.legend(bbox_to_anchor=(0.01, 0.97, 0.99, 0.97), loc=3, ncol=3, mode="expand", borderaxespad=0., prop={'size': 16}, frameon=False)
plt.tight_layout()

plt.show()